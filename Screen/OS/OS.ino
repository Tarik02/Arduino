#include <Arduino.h>
#include "LCD.h"

#define S_RST  8
#define S_CE   9
#define S_DC  10
#define S_DIN 11
#define S_CLK 12

LCD *Screen;

static const unsigned char Taras[] PROGMEM =
{
  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00000001,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00111011,  B11100000,  B00000111,  B11111000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00111111,  B11100000,  B01111000,  B00001100,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B11111111,  B11100011,  B11000000,  B00000110,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000001,  B11111111,  B11101110,  B00000000,  B00000111,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000011,  B11111111,  B11111000,  B00000000,  B00000001,  B10000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000111,  B11111111,  B11000000,  B00000000,  B00000000,  B10000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000111,  B11111111,  B10000000,  B00000000,  B00000000,  B11000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000111,  B11110100,  B00000000,  B00000000,  B00000000,  B01000000,  B00000000,  B00000000,
  B00000000,  B00001000,  B00000000,  B00110011,  B11111000,  B00000000,  B00000000,  B00000000,  B01000000,  B00000000,  B00000000,
  B00000000,  B00001000,  B00000011,  B10000001,  B11111100,  B00000000,  B00000000,  B00000000,  B01100000,  B00000000,  B00000000,
  B00000000,  B00000111,  B01111110,  B00001011,  B11111110,  B00000000,  B00000000,  B00000000,  B00100000,  B00000000,  B00000000,
  B00000000,  B00001111,  B11111000,  B00011111,  B11111110,  B00000000,  B00000000,  B00000000,  B00110000,  B00000000,  B00000000,
  B00000000,  B00001111,  B11111000,  B00111111,  B11111101,  B11111000,  B00000000,  B00000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00001111,  B11110000,  B11111111,  B11111111,  B11110100,  B00000000,  B00000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00001111,  B11100001,  B01111111,  B11111111,  B11111110,  B00000000,  B00000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00001111,  B11000001,  B11111111,  B11111111,  B11111110,  B00000000,  B00000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00001111,  B10000011,  B11111111,  B11111111,  B11111110,  B00000000,  B00000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00000111,  B00000111,  B11111111,  B11111111,  B11111101,  B00000000,  B00000000,  B00011000,  B00000000,  B00000000,
  B00000000,  B00001111,  B00001111,  B11111111,  B11111111,  B11111111,  B10000000,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000111,  B00011111,  B11111111,  B11111111,  B11111111,  B11001100,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00001110,  B00111111,  B11111111,  B11111111,  B11111111,  B11110110,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000100,  B01111111,  B11111111,  B11111111,  B11111111,  B11111111,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00001100,  B10111111,  B11111111,  B11111111,  B11111111,  B11111111,  B10000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00001100,  B11111111,  B11111111,  B11111111,  B00111111,  B11111111,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000000,  B11111111,  B11111111,  B11111111,  B00111111,  B11111110,  B00000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00001001,  B11111111,  B11111111,  B11111111,  B00111111,  B11111111,  B10000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000001,  B11111111,  B11111111,  B11111111,  B00111111,  B11111111,  B11000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000010,  B11111111,  B11111111,  B11111111,  B10111011,  B11111111,  B11000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00000011,  B11111111,  B11111111,  B11111111,  B10111011,  B11111111,  B11000000,  B00001000,  B00000000,  B00000000,
  B00000000,  B00001011,  B11111110,  B11111111,  B11111111,  B00110011,  B11111111,  B11000000,  B00011000,  B00000000,  B00000000,
  B00000000,  B00001011,  B11111110,  B11111111,  B11111111,  B11111011,  B11111111,  B11100000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00000011,  B11111110,  B11111111,  B11111111,  B11111111,  B11111111,  B11000000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00000011,  B11111110,  B11111111,  B11111111,  B11111111,  B11111111,  B10100000,  B00010000,  B00000000,  B00000000,
  B00000000,  B00000010,  B11111110,  B11111101,  B11111111,  B11111111,  B11111111,  B11100000,  B00100000,  B00000000,  B00000000,
  B00000000,  B00000001,  B11111110,  B11111111,  B11111111,  B11111111,  B11111111,  B10000000,  B01100000,  B00000000,  B00000000,
  B00000000,  B00000000,  B11111110,  B11111111,  B11111111,  B11111111,  B11111111,  B10000000,  B11000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B01111110,  B01111111,  B11111111,  B11111111,  B11111111,  B10000001,  B10000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00011110,  B11111111,  B11111110,  B01111111,  B11111111,  B01000011,  B10000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00011111,  B11111111,  B11111100,  B00111111,  B11111111,  B11110111,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00001111,  B11111111,  B11111110,  B01101111,  B11111111,  B10111110,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000001,  B11111111,  B11111110,  B01100111,  B11111111,  B10111100,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B11110111,  B11111110,  B01101111,  B11111111,  B11111000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00001111,  B11111110,  B11111111,  B11111111,  B11100000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B01111111,  B11111110,  B00000000,  B00000000,  B00000000,  B00000000,
  B00000000,  B00000000,  B00000000,  B00000000,  B00000000,  B00001111,  B11110000,  B00000000,  B00000000,  B00000000,  B00000000,
};


void setup()
{
  Screen = new LCD(S_RST,S_CE,S_DC,S_DIN,S_CLK);
  Screen->clear();
}
int8_t checkFPS(int64_t sTime,int64_t eTime)
{
  return 1 / ((eTime - sTime) / 1000);
};
int64_t FPS_startTime;
int64_t FPS_endTime;
int8_t FPS;
void loop()
{
  
  //Screen->drawBitmapToScreenPGM(0,0,84,48,Taras);
  FPS_startTime = millis();
  Screen->drawBitmapPGM(0,0,84,48,Taras);
  FPS_endTime = millis();
  FPS = checkFPS(FPS_startTime,FPS_endTime);
  
  String sFPS = String(FPS);
  char fps[5];
  sFPS.toCharArray(fps,5);
  Screen->drawText(0,0,fps,1);
  Screen->display();
  
  
  
}
